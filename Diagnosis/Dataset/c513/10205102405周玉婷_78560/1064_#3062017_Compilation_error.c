<html>
<body>
<!--StartFragment--><div style="color: #000000;background-color: #ffffff;font-family: Consolas, 'Courier New', monospace;font-weight: normal;font-size: 14px;line-height: 19px;white-space: pre;"><div><span style="color: #af00db;">#include</span><span style="color: #0000ff;"> </span><span style="color: #a31515;">&lt;stdio.h&gt;</span></div><div><span style="color: #af00db;">#include</span><span style="color: #0000ff;"> </span><span style="color: #a31515;">&lt;stdlib.h&gt;</span></div><div><span style="color: #0000ff;">typedef</span><span style="color: #000000;"> </span><span style="color: #0000ff;">struct</span><span style="color: #000000;">{</span></div><div><span style="color: #000000;">&#160; &#160; </span><span style="color: #0000ff;">double</span><span style="color: #000000;"> </span><span style="color: #001080;">num</span><span style="color: #000000;">;</span></div><div><span style="color: #000000;">&#160; &#160; </span><span style="color: #0000ff;">char</span><span style="color: #000000;"> </span><span style="color: #001080;">sign</span><span style="color: #000000;">;</span></div><div><span style="color: #000000;">} </span><span style="color: #267f99;">divisor</span><span style="color: #000000;">;</span></div><div><span style="color: #267f99;">divisor</span><span style="color: #000000;">* </span><span style="color: #001080;">tail</span><span style="color: #000000;">;</span></div><div><span style="color: #0000ff;">void</span><span style="color: #000000;"> </span><span style="color: #795e26;">judge</span><span style="color: #000000;">(</span><span style="color: #0000ff;">double</span><span style="color: #000000;"> </span><span style="color: #001080;">x</span><span style="color: #000000;">)</span></div><div><span style="color: #000000;">{</span></div><div><span style="color: #000000;">&#160; &#160;</span><span style="color: #af00db;">if</span><span style="color: #000000;">((</span><span style="color: #001080;">tail</span><span style="color: #000000;">-&gt;</span><span style="color: #001080;">sign</span><span style="color: #000000;">) == </span><span style="color: #098658;">0</span><span style="color: #000000;">)</span><span style="color: #008000;">//栈顶是数字，运算，将运算结果储存</span></div><div><span style="color: #000000;">&#160; &#160;{</span></div><div><span style="color: #000000;">&#160; &#160; </span><span style="color: #0000ff;">double</span><span style="color: #000000;"> </span><span style="color: #001080;">temp</span><span style="color: #000000;"> = (</span><span style="color: #001080;">tail</span><span style="color: #000000;">-&gt;</span><span style="color: #001080;">num</span><span style="color: #000000;">);</span></div><div><span style="color: #000000;">&#160; &#160; </span><span style="color: #001080;">tail</span><span style="color: #000000;">--;</span></div><div><span style="color: #000000;">&#160; &#160; </span><span style="color: #af00db;">switch</span><span style="color: #000000;">(</span><span style="color: #001080;">tail</span><span style="color: #000000;">-&gt;</span><span style="color: #001080;">sign</span><span style="color: #000000;">)</span></div><div><span style="color: #000000;">&#160; &#160; {</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; </span><span style="color: #af00db;">case</span><span style="color: #000000;"> </span><span style="color: #a31515;">'+'</span><span style="color: #000000;">:</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; </span><span style="color: #001080;">tail</span><span style="color: #000000;">-&gt;</span><span style="color: #001080;">num</span><span style="color: #000000;"> = </span><span style="color: #001080;">temp</span><span style="color: #000000;"> + </span><span style="color: #001080;">x</span><span style="color: #000000;">;</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; </span><span style="color: #af00db;">break</span><span style="color: #000000;">;</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; </span><span style="color: #af00db;">case</span><span style="color: #000000;"> </span><span style="color: #a31515;">'-'</span><span style="color: #000000;">:</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; </span><span style="color: #001080;">tail</span><span style="color: #000000;">-&gt;</span><span style="color: #001080;">num</span><span style="color: #000000;"> = </span><span style="color: #001080;">temp</span><span style="color: #000000;"> - </span><span style="color: #001080;">x</span><span style="color: #000000;">;</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; </span><span style="color: #af00db;">break</span><span style="color: #000000;">;</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; </span><span style="color: #af00db;">case</span><span style="color: #000000;"> </span><span style="color: #a31515;">'*'</span><span style="color: #000000;">:</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; </span><span style="color: #001080;">tail</span><span style="color: #000000;">-&gt;</span><span style="color: #001080;">num</span><span style="color: #000000;"> = </span><span style="color: #001080;">temp</span><span style="color: #000000;"> * </span><span style="color: #001080;">x</span><span style="color: #000000;">;</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; </span><span style="color: #af00db;">break</span><span style="color: #000000;">;</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; </span><span style="color: #af00db;">case</span><span style="color: #000000;"> </span><span style="color: #a31515;">'/'</span><span style="color: #000000;">:</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; </span><span style="color: #001080;">tail</span><span style="color: #000000;">-&gt;</span><span style="color: #001080;">num</span><span style="color: #000000;"> = </span><span style="color: #001080;">temp</span><span style="color: #000000;"> / </span><span style="color: #001080;">x</span><span style="color: #000000;">;</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; </span><span style="color: #af00db;">break</span><span style="color: #000000;">;</span></div><div><span style="color: #000000;">&#160; &#160; }</span></div><div><span style="color: #000000;">&#160; &#160; </span><span style="color: #001080;">tail</span><span style="color: #000000;">-&gt;</span><span style="color: #001080;">sign</span><span style="color: #000000;"> = </span><span style="color: #098658;">0</span><span style="color: #000000;">;</span></div><div><span style="color: #000000;">&#160; &#160;}</span></div><div><span style="color: #000000;">&#160; &#160;</span><span style="color: #af00db;">else</span><span style="color: #000000;"> {++</span><span style="color: #001080;">tail</span><span style="color: #000000;">; (</span><span style="color: #001080;">tail</span><span style="color: #000000;">-&gt;</span><span style="color: #001080;">num</span><span style="color: #000000;">) = </span><span style="color: #001080;">x</span><span style="color: #000000;">; (</span><span style="color: #001080;">tail</span><span style="color: #000000;">-&gt;</span><span style="color: #001080;">sign</span><span style="color: #000000;">) = </span><span style="color: #098658;">0</span><span style="color: #000000;">;}</span><span style="color: #008000;">//栈顶是运算符，暂不运算，数字储存起来</span></div><div><span style="color: #000000;">&#160; &#160;</span><span style="color: #af00db;">return</span><span style="color: #000000;"> ;</span></div><div><span style="color: #000000;">}</span></div><br><div><span style="color: #0000ff;">int</span><span style="color: #000000;"> </span><span style="color: #795e26;">main</span><span style="color: #000000;">()</span></div><div><span style="color: #000000;">{</span></div><div><span style="color: #000000;">&#160; &#160; </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> </span><span style="color: #001080;">t</span><span style="color: #000000;">;</span></div><div><span style="color: #000000;">&#160; &#160; </span><span style="color: #795e26;">scanf</span><span style="color: #000000;">(</span><span style="color: #a31515;">"</span><span style="color: #001080;">%d</span><span style="color: #a31515;">"</span><span style="color: #000000;">, &amp;</span><span style="color: #001080;">t</span><span style="color: #000000;">);</span></div><div><span style="color: #000000;">&#160; &#160; </span><span style="color: #0000ff;">char</span><span style="color: #000000;"> </span><span style="color: #001080;">c</span><span style="color: #000000;">;</span></div><div><span style="color: #000000;">&#160; &#160; </span><span style="color: #001080;">c</span><span style="color: #000000;"> = </span><span style="color: #795e26;">getchar</span><span style="color: #000000;">();</span></div><div><span style="color: #000000;">&#160; &#160; </span><span style="color: #267f99;">divisor</span><span style="color: #000000;">* </span><span style="color: #001080;">p</span><span style="color: #000000;"> = (</span><span style="color: #267f99;">divisor</span><span style="color: #000000;">*)</span><span style="color: #795e26;">malloc</span><span style="color: #000000;">(</span><span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(</span><span style="color: #267f99;">divisor</span><span style="color: #000000;">)*</span><span style="color: #098658;">60</span><span style="color: #000000;">);</span></div><div><span style="color: #000000;">&#160; &#160; </span><span style="color: #001080;">tail</span><span style="color: #000000;"> = </span><span style="color: #001080;">p</span><span style="color: #000000;">;</span></div><div><span style="color: #000000;">&#160; &#160; </span><span style="color: #af00db;">for</span><span style="color: #000000;">(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> </span><span style="color: #001080;">j</span><span style="color: #000000;">=</span><span style="color: #098658;">0</span><span style="color: #000000;">; </span><span style="color: #001080;">j</span><span style="color: #000000;">&lt;</span><span style="color: #001080;">t</span><span style="color: #000000;">; </span><span style="color: #001080;">j</span><span style="color: #000000;">++)</span></div><div><span style="color: #000000;">&#160; &#160; {</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; </span><span style="color: #0000ff;">char</span><span style="color: #000000;"> </span><span style="color: #001080;">s</span><span style="color: #000000;">[</span><span style="color: #098658;">12</span><span style="color: #000000;">];</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> </span><span style="color: #001080;">index</span><span style="color: #000000;"> = </span><span style="color: #098658;">0</span><span style="color: #000000;">;</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; </span><span style="color: #001080;">c</span><span style="color: #000000;"> = </span><span style="color: #795e26;">getchar</span><span style="color: #000000;">();</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; </span><span style="color: #001080;">tail</span><span style="color: #000000;">-&gt;</span><span style="color: #001080;">sign</span><span style="color: #000000;"> = </span><span style="color: #001080;">c</span><span style="color: #000000;">;</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; </span><span style="color: #af00db;">while</span><span style="color: #000000;">( </span><span style="color: #001080;">c</span><span style="color: #000000;">!=</span><span style="color: #a31515;">'</span><span style="color: #ee0000;">\n</span><span style="color: #a31515;">'</span><span style="color: #000000;"> )</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; {</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; </span><span style="color: #001080;">c</span><span style="color: #000000;"> = </span><span style="color: #795e26;">getchar</span><span style="color: #000000;">();</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; </span><span style="color: #af00db;">if</span><span style="color: #000000;">(</span><span style="color: #001080;">c</span><span style="color: #000000;"> == </span><span style="color: #a31515;">' '</span><span style="color: #000000;">) </span><span style="color: #af00db;">continue</span><span style="color: #000000;">;</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; </span><span style="color: #af00db;">else</span><span style="color: #000000;"> </span><span style="color: #af00db;">if</span><span style="color: #000000;">(</span><span style="color: #001080;">c</span><span style="color: #000000;"> == </span><span style="color: #a31515;">'*'</span><span style="color: #000000;"> || </span><span style="color: #001080;">c</span><span style="color: #000000;"> == </span><span style="color: #a31515;">'+'</span><span style="color: #000000;"> || </span><span style="color: #001080;">c</span><span style="color: #000000;"> == </span><span style="color: #a31515;">'-'</span><span style="color: #000000;"> || </span><span style="color: #001080;">c</span><span style="color: #000000;"> == </span><span style="color: #a31515;">'/'</span><span style="color: #000000;">) &#160;{++</span><span style="color: #001080;">tail</span><span style="color: #000000;">; </span><span style="color: #001080;">tail</span><span style="color: #000000;">-&gt;</span><span style="color: #001080;">sign</span><span style="color: #000000;"> = </span><span style="color: #001080;">c</span><span style="color: #000000;">;}</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; </span><span style="color: #af00db;">else</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; {</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; &#160; &#160; </span><span style="color: #af00db;">do</span><span style="color: #000000;">{</span><span style="color: #001080;">s</span><span style="color: #000000;">[</span><span style="color: #001080;">index</span><span style="color: #000000;">++] = </span><span style="color: #001080;">c</span><span style="color: #000000;">;}</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; &#160; &#160; </span><span style="color: #af00db;">while</span><span style="color: #000000;">((</span><span style="color: #001080;">c</span><span style="color: #000000;">=</span><span style="color: #795e26;">getchar</span><span style="color: #000000;">()) != </span><span style="color: #a31515;">' '</span><span style="color: #000000;"> &amp;&amp; </span><span style="color: #001080;">c</span><span style="color: #000000;">!=</span><span style="color: #a31515;">'</span><span style="color: #ee0000;">\n</span><span style="color: #a31515;">'</span><span style="color: #000000;">);</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; &#160; &#160; </span><span style="color: #001080;">s</span><span style="color: #000000;">[</span><span style="color: #001080;">index</span><span style="color: #000000;">] = </span><span style="color: #a31515;">'</span><span style="color: #ee0000;">\0</span><span style="color: #a31515;">'</span><span style="color: #000000;">;</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; &#160; &#160; </span><span style="color: #0000ff;">double</span><span style="color: #000000;"> </span><span style="color: #001080;">num</span><span style="color: #000000;"> = </span><span style="color: #795e26;">atof</span><span style="color: #000000;">(</span><span style="color: #001080;">s</span><span style="color: #000000;">);</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; &#160; &#160; </span><span style="color: #795e26;">judge</span><span style="color: #000000;">(</span><span style="color: #001080;">num</span><span style="color: #000000;">); &#160; </span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; &#160; &#160; </span><span style="color: #001080;">index</span><span style="color: #000000;"> = </span><span style="color: #098658;">0</span><span style="color: #000000;">;</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; }</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; }</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; </span><span style="color: #795e26;">printf</span><span style="color: #000000;">(</span><span style="color: #a31515;">"case #</span><span style="color: #001080;">%d</span><span style="color: #a31515;">:</span><span style="color: #ee0000;">\n</span><span style="color: #a31515;">"</span><span style="color: #000000;">, </span><span style="color: #001080;">j</span><span style="color: #000000;">);</span></div><div><span style="color: #000000;">&#160; &#160; &#160; &#160; </span><span style="color: #795e26;">printf</span><span style="color: #000000;">(</span><span style="color: #a31515;">"</span><span style="color: #001080;">%.6lf</span><span style="color: #ee0000;">\n</span><span style="color: #a31515;">"</span><span style="color: #000000;">, </span><span style="color: #001080;">tail</span><span style="color: #000000;">-&gt;</span><span style="color: #001080;">num</span><span style="color: #000000;">);</span></div><div><span style="color: #000000;">&#160; &#160; }</span></div><div><span style="color: #000000;">&#160; &#160; </span><span style="color: #001080;">tail</span><span style="color: #000000;"> = </span><span style="color: #098658;">0</span><span style="color: #000000;">;</span></div><div><span style="color: #000000;">&#160; &#160; </span><span style="color: #795e26;">free</span><span style="color: #000000;">(</span><span style="color: #001080;">p</span><span style="color: #000000;">);</span></div><div><span style="color: #000000;">&#160; &#160; </span><span style="color: #af00db;">return</span><span style="color: #000000;"> </span><span style="color: #098658;">0</span><span style="color: #000000;">;</span></div><div><span style="color: #000000;">}</span></div></div><!--EndFragment-->
</body>
</html>